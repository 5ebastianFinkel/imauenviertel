---
import Container from "@components/container.astro";
import Link from "@components/ui/link.astro";
import Dropdown from "./dropdown.astro";
import {Astronav, MenuItems, MenuIcon} from "astro-navbar";
import {Picture} from "astro:assets";
import Logo from "../../assets/logo.avif"

const menuitems = [
    // {
    //   title: "Features",
    //   path: "#",
    //   children: [
    //     { title: "Action", path: "/" },
    //     { title: "Another action", path: "#" },
    //     { title: "Dropdown Submenu", path: "#" },
    //     { title: "404 Page", path: "/404" },
    //   ],
    // },
    {
        title: "Neuigkeiten",
        path: "/blog",
    },
    {
        title: "Ãœber uns",
        path: "/about",
    },
    {
        title: "Dokumente & Links",
        path: "/documents",
    },
    {
        title: "Kontakt",
        path: "/contact",
    },
];
---

<Container>
    <header class="relative flex flex-col lg:flex-row justify-between items-center my-5">
        <!-- Subtle Christmas sparkles -->
        <div class="sparkles-container" aria-hidden="true">
            <div class="sparkle sparkle-1"></div>
            <div class="sparkle sparkle-2"></div>
            <div class="sparkle sparkle-3"></div>
            <div class="sparkle sparkle-4"></div>
            <div class="sparkle sparkle-5"></div>
        </div>
        <Astronav>
            <div class="flex w-full lg:w-auto items-center justify-between">
                <a href="/" class="text-lg" aria-label="Zur Startseite">
                    <Picture
                            src={Logo}
                            alt="Logo Im Auenviertel"
                            sizes="(max-width: 80px) 1vh, 80px"
                            width={80}
                            height={80}
                            loading={"lazy"}
                            decoding={"async"}
                            class="w-full rounded-md object-cover object-center bg-white"
                    />
                    <span class="font-bold text-slate-800">Im Auen</span><span class="text-slate-500">viertel</span>
                </a>
                <div class="block lg:hidden">
                    <MenuIcon class="w-8 h-8 text-gray-800"/>
                </div>
            </div>
            <MenuItems class="hidden w-full lg:w-auto mt-2 lg:flex lg:mt-0">
                <ul class="flex flex-col lg:flex-row lg:gap-3 text-xl">
                    {
                        menuitems.map((item, index) => (
                                <>
                                    {item.children && (
                                            <Dropdown
                                                    title={item.title}
                                                    children={item.children}
                                                    lastItem={index === menuitems.length - 1}
                                            />
                                    )}

                                    {!item.children && (
                                            <li>
                                                <a
                                                        href={item.path}
                                                        class="flex lg:px-3 py-2 items-center text-gray-600 hover:text-gray-900">
                                                    <span> {item.title}</span>
                                                    {item.badge && (
                                                            <span class="ml-1 px-2 py-0.5 text-[10px] animate-pulse font-semibold uppercase text-white bg-indigo-600 rounded-full">
                          New
                        </span>
                                                    )}
                                                </a>
                                            </li>
                                    )}
                                </>
                        ))
                    }
                </ul>
                <div class="lg:hidden flex items-center mt-3 gap-4">
                    <!--<Link href="#" style="muted" block size="md">Log in</Link>-->
                    <!--<Link href="#" size="md" block>Sign up</Link>-->
                </div>
            </MenuItems>
        </Astronav>
        <div>
            <div class="hidden lg:flex items-center gap-4">
                <!--<a href="#">Log in</a>-->
                <!--<Link href="#" size="md">Sign up</Link>-->
            </div>
        </div>
    </header>
</Container>

<style>
    .sparkles-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: 0;
    }

    .sparkle {
        position: absolute;
        width: 4px;
        height: 4px;
        border-radius: 50%;
        background: radial-gradient(circle, #ffd700 0%, #ffb800 50%, transparent 70%);
        opacity: 0;
        box-shadow: 0 0 6px 2px rgba(255, 215, 0, 0.4);
    }

    /* Larger sparkles on desktop */
    @media (min-width: 1024px) {
        .sparkle {
            width: 6px;
            height: 6px;
            box-shadow: 0 0 8px 3px rgba(255, 215, 0, 0.5);
        }
    }

    .sparkle-1 {
        left: 15%;
        top: 30%;
        animation: sparkle-fade 4s ease-in-out infinite;
        animation-delay: 0s;
    }

    .sparkle-2 {
        left: 35%;
        top: 60%;
        animation: sparkle-fade 5s ease-in-out infinite;
        animation-delay: 1.5s;
    }

    .sparkle-3 {
        left: 55%;
        top: 25%;
        animation: sparkle-fade 4.5s ease-in-out infinite;
        animation-delay: 3s;
    }

    .sparkle-4 {
        left: 75%;
        top: 50%;
        animation: sparkle-fade 5.5s ease-in-out infinite;
        animation-delay: 2s;
    }

    .sparkle-5 {
        left: 90%;
        top: 35%;
        animation: sparkle-fade 4s ease-in-out infinite;
        animation-delay: 4s;
    }

    @keyframes sparkle-fade {
        0%, 100% {
            opacity: 0;
            transform: scale(0.5);
        }
        15% {
            opacity: 0.8;
            transform: scale(1);
        }
        30% {
            opacity: 0;
            transform: scale(0.5);
        }
    }

    /* Reduce motion for accessibility */
    @media (prefers-reduced-motion: reduce) {
        .sparkle {
            animation: none;
        }
    }
</style>
